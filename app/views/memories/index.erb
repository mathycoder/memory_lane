<h1><%=@user.name%>'s Memories</h1>

<p><a href="/users/<%=@user.id%>/memories/new">Create New Memory</a></p>

<div>
  <% @user.memories.each do |memory| %>
    <h3 style="display: inline"> Memory: <%= memory.title %> <br>
         With:
          <% memory.lane.users.each do |user| %>
            <%=user.name if user != @user %>
          <% end %><br>
         Location: <%= memory.location %> <br>
         Date: <%= memory.date %><br></h3>
    <h6 style="display: inline">Created by <%=memory.creator.name %>

      <% if memory.creator == @user %>
        <a href="/users/<%=@user.id%>/memories/<%=memory.id%>">Edit</a>
      <% end %>

    </h6>

      <% memory.recollections.each do |recollection| %>
        <p>Recollection by <%=recollection.user.name %>:

          <% if recollection.user == @user %>
            <a href="/users/<%=@user.id%>/memories/<%=memory.id%>/recollections/<%=recollection.id%>/edit">Edit</a>
          <% end %>

          <br>

          <% if !recollection.anecdote.nil? %>
            <%= "Anecdote: " + recollection.anecdote %><br>
          <% end %>

          <% if !recollection.quote.nil? %>
            <%= "Quote: " + recollection.quote%><br>
          <% end %>

          <% if !recollection.joke.nil? %>
            <%= "Joke: " + recollection.joke %>
          <% end %>
        </p>
      <% end %>

      <% if memory.recollections.none? {|recollection| recollection.user == @user} %>
        <form method="GET" action="/users/<%=@user.id%>/memories/<%=memory.id%>/recollections/new">
          <input type='submit' value='Add Your Recollection'>
        </form>
      <% end %>

  <% end %>
</div>
