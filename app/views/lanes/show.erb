<div>
  <h1 style="display: inline">Memory Lane</h1>
  <br>
  <h6 style="display: inline">

    <span>
      <% @lane.users.each do |user| %>
        <img width="40" height="47" src="../../../<%= user.profile_pic_file_path %>">
      <% end %>
    </span>

    <br>

     <span> with <%= @user.list(@lane.users) %></span>
  </h6>
</div>

<p><a href="/users/<%=@user.id%>/memories/new">Create New Memory</a></p>

<div>
  <% @lane.memories.sorted_by_newest.each do |memory| %>
    <h3 style="display: inline"> Memory: <%= memory.title %> <br>
         Location: <%= memory.location %> <br>
         Date: <%= memory.display_date %><br> </h3>
         <h6 style="display: inline">Created by <%=memory.creator.name %>

           <% if memory.creator == @user %>
             <a href="/users/<%=@user.id%>/memories/<%=memory.id%>/edit">Edit</a>
           <% end %>

         </h6>

      <br><br>
        <div class="memoryimages">
          <% memory.photos.each do |photo| %>

            <% if !photo.file_path.nil?%>
                <div>
                  <a href="/users/<%=@user.id%>/memories/<%=memory.id%>/images/<%=photo.id%>">
                    <img width="300" height="200" src="../../../<%= photo.file_path %>" /></a><br>
                  <h6 style="display: inline">photo by <%=photo.user.name%>
                  <% if photo.user == @user %>
                    <form style="display: inline" method="POST" action="/users/<%=@user.id%>/memories/<%=memory.id%>/images/<%=photo.id%>">

                      <input type="hidden" method="hidden" name="_method" value="DELETE">
                      <input type="submit" value="delete">
                    </form>
                  <% end %>
                  </h6>
                </div>
            <% end %>
          <% end %>

          <div id="addapicture">
            <form method="GET" action="/users/<%=@user.id%>/memories/<%=memory.id%>/images/new">
              <input type='submit' value='Add A Picture'>
            </form>
          </div>

        </div>

      <br>

      <% memory.recollections.each do |recollection| %>
        <p style="display: inline">
          <% if !recollection.user.profile_pic_file_path.nil?%>
          <img width="30" height="35" src="../../../<%= recollection.user.profile_pic_file_path %>" />
          <% end %>

          Recollection by <%=recollection.user.name %>
          <% if recollection.user == @user %>
            <a href="/users/<%=@user.id%>/memories/<%=memory.id%>/recollections/<%=recollection.id%>/edit">Edit</a>
          <% end %>

          <br>

          <% if !recollection.anecdote.nil? %>
            <%= "Anecdote: " + recollection.anecdote %><br>
          <% end %>

          <% if !recollection.quote.nil? %>
            <%= "Quote: " + recollection.quote%><br>
          <% end %>

          <% if !recollection.joke.nil? %>
            <%= "Joke: " + recollection.joke %><br>
          <% end %>

          <br>

        </p>
      <% end %>

      <% if memory.recollections.none? {|recollection| recollection.user == @user} %>
        <form method="GET" action="/users/<%=@user.id%>/memories/<%=memory.id%>/recollections/new">
          <input type='submit' value='Add Your Recollection'>
        </form><br>
      <% end %>

    <% end %>

</div>


<p><a href="/users/<%=@user.id%>/lanes">Back to Lanes</a></p>
